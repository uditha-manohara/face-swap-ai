<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Face Swap</title>
    <link href="styles.css" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gradient-to-br from-indigo-50 to-purple-100 text-gray-900 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl p-8 sm:p-10">
      <h1 class="text-4xl sm:text-5xl font-extrabold text-center text-indigo-700 mb-4">ðŸ§  AI Face Swap</h1>
      <p class="text-center text-base text-gray-600 mb-8">Upload two images to swap faces using free Segmind API</p>

      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-700">Source Face</label>
          <input
            type="file"
            id="source"
            accept="image/*"
            class="input"
          />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1 text-gray-700">Target Image</label>
          <input
            type="file"
            id="target"
            accept="image/*"
            class="input"
          />
        </div>
        <button
          onclick="submit()"
          class="btn-primary"
        >
          ðŸ”„ Swap Faces
        </button>
        <p id="loading" class="text-center text-sm text-gray-500 hidden">Swapping... please wait</p>
      </div>

      <div id="result" class="mt-8 hidden">
        <h2 class="text-center text-lg font-semibold mb-3">Result</h2>
        <img id="output" class="mx-auto rounded-xl shadow-md max-w-full" />
      </div>
    </div>

    <script>
      async function submit() {
        const source = document.getElementById("source").files[0];
        const target = document.getElementById("target").files[0];
        const output = document.getElementById("output");
        const result = document.getElementById("result");
        const loading = document.getElementById("loading");

        if (!source || !target) return alert("Please upload both images.");

        const formData = new FormData();
        formData.append("source", source);
        formData.append("target", target);

        loading.classList.remove("hidden");
        result.classList.add("hidden");

        try {
          const response = await fetch("https://face-swap-api.onrender.com/swap", {
            method: "POST",
            body: formData,
          });
          const blob = await response.blob();
          output.src = URL.createObjectURL(blob);
          result.classList.remove("hidden");
        } catch (err) {
          alert("Something went wrong. Try again later.");
        }

        loading.classList.add("hidden");
      }
    </script>
  </body>
</html>
